{"inkVersion":21,"root":[["#","^Incident 4: The Apdex Abyss 🚨⚙️","/#",{"->":"start"},["done",{"#f":5,"#n":"g-0"}],null],"done",{"start":[["^<b>You've received alerts that the Apdex score for the pro-api has dropped below 71%. Your phone is buzzing, your pager is flashing, and your dog is hiding under the bed. It's an on-call engineer's worst nightmare!</b> 😱","\n","ev","str","^Acknowledge like the Hero engineer you are!","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^No, I’m busy coding. Alerts are too sensitive today, right? (Tell that to the angry customers!)","/str","/ev",{"*":".^.c-1","flg":20},{"c-0":["^ ",{"->":"check_customer_impact_question"},"\n",{"#f":5}],"c-1":["^ ",{"->":"incident_neglect_start"},"\n","^    ","end","\n",{"#f":5}]}],{"#f":1}],"check_customer_impact_question":[["^<b>Is there any order loss or poor customer experience? Are users suffering on the app and tweeting angry emojis? 😨</b>","\n","ev","str","^Q: How to check if there is order impact?","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^No need to check order loss. Logs > Humans. Let me dive into the root cause. (Are you sure you're not a robot in disguise?)","/str","/ev",{"*":".^.c-1","flg":20},{"c-0":["^ ",{"->":"check_customer_impact_answer"},"\n",{"#f":5}],"c-1":["^ ",{"->":"incident_neglect_check_customer_impact"},"\n","^    ","end","\n",{"#f":5}]}],{"#f":1}],"check_customer_impact_answer":[["^<b>We can check the impact on orders by checking the <a target=\"_blank\" href=\"https://onenr.io/0dQeqgG1rQe\" style=\"color: blue;text-decoration: underline;\">Shopping Dashboard</a>. (Hold your breath, it's about to get real!)</b>","\n","ev","str","^No drop in orders, but customer experience might be suffering. Let’s keep digging. (Phew! That's a relief, but the mystery continues...)","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["^ ",{"->":"create_incident"},"\n",{"#f":5}]}],{"#f":1}],"create_incident":[["^<b>Still create an incident? (To document, or not to document, that is the question!)</b>","\n","ev","str","^Yes, let's shine a light on this darkness!","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^No, let's keep it our little secret. (But secrets have a way of getting out...)","/str","/ev",{"*":".^.c-1","flg":20},"ev","str","^No, I’m allergic to post-mortems. No incidents = no write-ups.","/str","/ev",{"*":".^.c-2","flg":20},{"c-0":["^ ",{"->":"check_newrelic"},"\n",{"#f":5}],"c-1":["^ ",{"->":"create_incident_answer"},"\n",{"#f":5}],"c-2":["^ ",{"->":"incident_neglect_create_incident"},"\n","^    ","end","\n",{"#f":5}]}],{"#f":1}],"create_incident_answer":[["ev","str","^Better to log it as it’s a customer-facing endpoint. (Transparency is key!)","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^No need. I’ll fix it so fast no one will know! Ninja mode on. (Are you sure you're not overestimating your ninja skills?)","/str","/ev",{"*":".^.c-1","flg":4},{"c-0":["^ ",{"->":"check_newrelic"},"\n",{"#f":5}],"c-1":["^ ",{"->":"incident_neglect_create_incident"},"\n","^    ","end","\n",{"#f":5}]}],{"#f":1}],"check_newrelic":[["^<b>Check NewRelic APM for high response time or increase in error rate to understand the drop in Apdex? (Time to put on your detective hat!)</b>","\n","ev","str","^Yes, continue investigations! (The plot thickens...)","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^No need, let's take a rest a bit. (But the Apdex score is still crying for help!)","/str","/ev",{"*":".^.c-1","flg":20},{"c-0":["^ ",{"->":"check_newrelic_answer"},"\n",{"#f":5}],"c-1":["^ ",{"->":"incident_neglect_check_newrelic"},"\n",{"#f":5}]}],{"#f":1}],"check_newrelic_answer":[["^<b>It seems the high response time started 10 minutes ago.</b>","\n","ev","str","^What to check next? (The suspense is killing me!)","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["^ ",{"->":"check_new_release_question"},"\n",{"#f":5}]}],{"#f":1}],"check_new_release_question":[["^<b>Is this related to a new release? (Did someone unleash a Kraken into the code? 🐙)</b>","\n","ev","str","^Q: How to check if there is a release correlated?","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^No, let’s just wait and hope for the best.","/str","/ev",{"*":".^.c-1","flg":20},{"c-0":["^ ",{"->":"check_new_release_answer"},"\n",{"#f":5}],"c-1":["^ ",{"->":"incident_neglect_check_new_release"},"\n","^    ","end","\n",{"#f":5}]}],{"#f":1}],"check_new_release_answer":[["^<b>We can check if there was a release today correlated by:</b>","\n","^<br>","\n",["^Checking NewRelic release markers. (Any red flags waving?)","\n","^<br>","\n",["^Checking the <a target=\"_blank\" href=\"https://deliveryhero.enterprise.slack.com/archives/C026LKZNDJB\" style=\"color: blue;text-decoration: underline;\">tlb_production_deployments Slack Channel</a>.","\n","^<br>","\n",["^Checking <a target=\"_blank\" href=\"https://argo.dhhmena.com/applications/pro-api-failover?resource=\" style=\"color: blue;text-decoration: underline;\">ArgoCD</a>. (Is there a rogue deployment on the loose?)","\n","^<br>","\n","ev","str","^Yep, there’s a fresh pro-api release!","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["^ ",{"->":"rollback_release_question"},"\n",{"#f":5}],"#f":5,"#n":"g-2"}],{"#f":5,"#n":"g-1"}],{"#f":5,"#n":"g-0"}],null],{"#f":1}],"rollback_release_question":[["^<b>Rollback the faulty release? (Time to hit the undo button!)</b>","\n","ev","str","^Q: How to rollback the release? (Is there a magic wand for this?)","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^No, let’s just wait and hope for the best.","/str","/ev",{"*":".^.c-1","flg":20},{"c-0":["^ ",{"->":"rollback_release_answer"},"\n",{"#f":5}],"c-1":["^ ",{"->":"incident_neglect_rollback_release"},"\n","^    ","end","\n",{"#f":5}]}],{"#f":1}],"rollback_release_answer":[["^<b>We have different options for rollback: we can use ArgoCD, trigger DroneCI, revert Git, and redeploy. (Choose your weapon wisely!)</b>","\n","^<a target=\"_blank\" href=\"https://confluence.deliveryhero.com/display/TAL/Rollback+from+ArgoCD\" style=\"color: blue;text-decoration: underline;\">How to Rollback</a>","\n","ev","str","^Yes, rollback! (Let's rewind and try again!)","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["^ ",{"->":"monitor_fix"},"\n",{"#f":5}]}],{"#f":1}],"monitor_fix":[["^<b>Did the rollback fix the issue? (Fingers crossed! 🤞)</b>","\n","ev","str","^Yes, Apdex is climbing back! (Victory is in sight!)","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["^ ",{"->":"monitor_apm"},"\n",{"#f":5}]}],{"#f":1}],"monitor_apm":[["^<b>Monitor NewRelic APM? (Keep your eyes peeled!)</b>","\n","ev","str","^Yes, let’s keep a watchful eye. (Don't let it out of your sight!)","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^No, I’m confident it’s all good now.","/str","/ev",{"*":".^.c-1","flg":20},{"c-0":["^ ",{"->":"update_monitoring"},"\n",{"#f":5}],"c-1":["^ ",{"->":"monitor_apm_answer"},"\n","end",{"#f":5}]}],{"#f":1}],"monitor_apm_answer":[["ev","str","^Wrong decision, let’s keep a watchful eye.","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["^ ",{"->":"monitor_apm"},"\n",{"#f":5}]}],{"#f":1}],"update_monitoring":[["^<b>Update the incident to monitoring state? (Let's keep the stakeholders in the loop!)</b>","\n","ev","str","^Yes, let’s keep everyone informed. (Communication is key!)","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^No, I’m too busy juggling logs and dashboards.","/str","/ev",{"*":".^.c-1","flg":20},{"c-0":["^ ",{"->":"inform_team"},"\n",{"#f":5}],"c-1":["^ ",{"->":"update_monitoring_answer"},"\n",{"#f":5}]}],{"#f":1}],"update_monitoring_answer":[["ev","str","^better to update incident to monitoring to update stackholders, let’s keep everyone in the loop.","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["^ ",{"->":"update_monitoring"},"\n",{"#f":5}]}],{"#f":1}],"inform_team":[["^<b>Inform the team? (Sharing is caring!)</b>","\n","ev","str","^Yes, let’s share the findings and avoid surprises. (Teamwork makes the dream work!)","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^No, this is my personal crusade. No one else needs to know.","/str","/ev",{"*":".^.c-1","flg":20},{"c-0":["^ ",{"->":"close_incident"},"\n",{"#f":5}],"c-1":["^ ",{"->":"inform_team_answer"},"\n",{"#f":5}]}],{"#f":1}],"inform_team_answer":[["ev","str","^Better to inform the team ,let’s share the findings and avoid surprises.","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["^ ",{"->":"inform_team"},"\n",{"#f":5}]}],{"#f":1}],"close_incident":[["^<b>Close the incident? (Is it time to celebrate?)</b>","\n","ev","str","^Yes, Apdex is back on track. Crisis mitigated!","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^No, I’ll keep it open for dramatic effect. (Are you sure you want to prolong the agony?)","/str","/ev",{"*":".^.c-1","flg":20},{"c-0":["^ ",{"->":"post_mortem"},"\n",{"#f":5}],"c-1":["^ ",{"->":"close_incident_answer"},"\n",{"#f":5}]}],{"#f":1}],"close_incident_answer":[["ev","str","^Finaly time to chill, Apdex is back on track. Crisis mitigated! lets close the incident","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["^ ",{"->":"close_incident"},"\n",{"#f":5}]}],{"#f":1}],"post_mortem":[["^<b>Create a draft post-mortem with timelines and findings? (Let's learn from our mistakes!)</b>","\n","ev","str","^Yes, document everything. Learn from it. Be the hero your team needs! (A true champion of post-mortems!)","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^No, please not me. (But who will save us from repeating history?)","/str","/ev",{"*":".^.c-1","flg":20},{"c-0":["^ ",{"->":"investigate_canary"},"\n",{"#f":5}],"c-1":["^ ",{"->":".^.^.^"},"\n",{"#f":5}]}],{"#f":1}],"post_mortem_answer":[["ev","str","^We have to document everything. Learn from it. Be the hero your team needs.","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["^ ",{"->":"post_mortem"},"\n",{"#f":5}]}],{"#f":1}],"investigate_canary":[["^<b>Pair with the team to check why the canary didn’t detect high response during release?</b>","\n","ev","str","^Yes, let’s dig into it. (The truth is out there!)","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^No, it’s not worth investigating. (But what if it happens again?)","/str","/ev",{"*":".^.c-1","flg":20},{"c-0":["^ ",{"->":"conclusion"},"\n",{"#f":5}],"c-1":["^ ",{"->":"investigate_canary_answer"},"\n",{"#f":5}]}],{"#f":1}],"investigate_canary_answer":[["ev","str","^Better to help the team to avoid such situation later, let’s dig into it.","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["^ ",{"->":"investigate_canary"},"\n",{"#f":5}]}],{"#f":1}],"conclusion":["^<b>🎉 **Victory!** You’ve saved the pro-api and earned the gratitude of all pro customers. The Apdex score is shining again, and your team will be more prepared for the next battle. Take a bow, engineer extraordinaire!</b>","\n","end",{"#f":1}],"incident_neglect_start":[["^<b>💀 **Oh no!** The incident spiraled out of control. Stakeholders are unhappy, and your inbox is flooded with *“urgent”* messages. Time to regroup and try again!</b>","\n","ev","str","^Try again?","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["^ ",{"->":"start"},"\n",{"#f":5}]}],{"#f":1}],"incident_neglect_check_customer_impact":[["^<b>💀 **Oh no!** The incident spiraled out of control. Stakeholders are unhappy, and your inbox is flooded with *“urgent”* messages. Time to regroup and try again!</b>","\n","ev","str","^Try again?","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["^ ",{"->":"check_customer_impact_question"},"\n",{"#f":5}]}],{"#f":1}],"incident_neglect_create_incident":[["^<b>💀 **Oh no!** The incident spiraled out of control. Stakeholders are unhappy, and your inbox is flooded with *“urgent”* messages. Time to regroup and try again!</b>","\n","ev","str","^Try again?","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["^ ",{"->":"create_incident"},"\n",{"#f":5}]}],{"#f":1}],"incident_neglect_check_new_release":[["^<b> Hope is not a strategy, my friend!</b>","\n","^</br>","\n","^<b>💀 **Oh no!** The incident spiraled out of control. Stakeholders are unhappy, and your inbox is flooded with *“urgent”* messages. Time to regroup and try again!</b>","\n","ev","str","^Try again?","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["^ ",{"->":"check_new_release_question"},"\n",{"#f":5}]}],{"#f":1}],"incident_neglect_rollback_release":[["^<b>💀 **Oh no!** The incident spiraled out of control. Stakeholders are unhappy, and your inbox is flooded with *“urgent”* messages. Time to regroup and try again!</b>","\n","ev","str","^Try again?","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["^ ",{"->":"rollback_release_question"},"\n",{"#f":5}]}],{"#f":1}],"incident_neglect_monitor_fix":[["^<b>💀 **Oh no!** The incident spiraled out of control. Stakeholders are unhappy, and your inbox is flooded with *“urgent”* messages. Time to regroup and try again!</b>","\n","ev","str","^Try again?","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["^ ",{"->":"monitor_fix"},"\n",{"#f":5}]}],{"#f":1}],"incident_neglect_check_newrelic":[["^<b>💀 **Oh no!** The incident spiraled out of control. Stakeholders are unhappy, and your inbox is flooded with *“urgent”* messages. Time to regroup and try again!</b>","\n","ev","str","^Try again?","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["^ ",{"->":"check_newrelic"},"\n",{"#f":5}]}],{"#f":1}],"#f":1}],"listDefs":{}}