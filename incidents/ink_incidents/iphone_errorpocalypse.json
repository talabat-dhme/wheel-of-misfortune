{"inkVersion":21,"root":[["#","^Incident 3: iPhone Errorpocalypse 🛠️📱","/#",{"->":"start"},["done",{"#f":5,"#n":"g-0"}],null],"done",{"start":[["^<b>You've received alerts that the error rate for iPhones has increased by 10%.</b>","\n","ev","str","^Acknowledge the alert.","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^No, I’m busy coding. it will recover soon","/str","/ev",{"*":".^.c-1","flg":20},{"c-0":["^ ",{"->":"check_customer_impact"},"\n",{"#f":5}],"c-1":["\n","^    ",{"->":"incident_neglect_start"},"\n","^    ","end","\n",{"#f":5}]}],{"#f":1}],"check_customer_impact":[["^<b>Is there any order loss or poor customer experience?</b>","\n","ev","str","^Q: How to check if there is order impact ?","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^No need to check order loss; I’ll just stare at logs and hope for clarity.","/str","/ev",{"*":".^.c-1","flg":20},{"c-0":["^ ",{"->":"check_customer_impact_answer"},"\n",{"#f":5}],"c-1":["\n","^    ",{"->":"incident_neglect_check_customer_impact"},"\n","^    ","end","\n",{"#f":5}]}],{"#f":1}],"check_customer_impact_answer":[["^<b>we can check impact on orders by checking <a target=\"_blank\" href=\"https://onenr.io/0dQeqgG1rQe\" style=\"color: blue;text-decoration: underline;\" >NR Shopping Dashboard</a></b>","\n","ev","str","^Yes, orders have dropped by 5%.","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["^ ",{"->":"check_country_impact"},"\n",{"#f":5}]}],{"#f":1}],"check_country_impact":[["^<b>Is the issue across all countries or specific?</b>","\n","ev","str","^NewRelic Dashboard shows it's a global crisis! The Iphone error is affecting all countries.","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^Brace yourself and proceed to create the incident.","/str","/ev",{"*":".^.c-1","flg":4},{"c-0":["^ ",{"->":"create_incident"},"\n",{"#f":5}],"c-1":["^ ",{"->":"create_incident"},"\n",{"#f":5}]}],{"#f":1}],"create_incident":[["^<b>Create an incident?</b>","\n","ev","str","^Yes, let's create incident using slack incident bot like a true hero.","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^No need, I’ll fix it before anyone notices.","/str","/ev",{"*":".^.c-1","flg":20},"ev","str","^No, I'm allergic to post-mortems. Not again!","/str","/ev",{"*":".^.c-2","flg":20},{"c-0":["^ ",{"->":"check_recent_release_question"},"\n",{"#f":5}],"c-1":["^ ",{"->t->":"incident_neglect_create_incident"},"end","\n",{"#f":5}],"c-2":["\n","^    ",{"->t->":"incident_neglect_create_incident"},"end","\n",{"#f":5}]}],{"#f":1}],"check_recent_release_question":[["^<b>Was there a release during the day? </b>","\n","ev","str","^Q: How to check if there is a release correlated?","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["^ ",{"->":"check_recent_release_answer"},"\n",{"#f":5}]}],{"#f":1}],"check_recent_release_answer":[["^<b>We can check if there was a release today correlated with exceptions by </b>","\n","^Check <a target=\"_blank\" href=\"https://deliveryhero.enterprise.slack.com/archives/C026LKZNDJB\" style=\"color: blue;text-decoration: underline;\" >tlb_production_deployments Slack Channel</a>","\n","^Check <a target=\"_blank\" href=\"https://argo.dhhmena.com/applications/iphoneapi-failover?resource=\" style=\"color: blue;text-decoration: underline;\">Argo</a> .","\n","^Turns out, there was no release. It's not a release bug, it's just your lucky day!","\n","ev","str","^Dig deeper. Contain the incident and dive in.","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^Close it. It's probably temp errors. (Spoiler: It's not.)","/str","/ev",{"*":".^.c-1","flg":20},{"c-0":["^ ",{"->":"check_endpoints"},"\n",{"#f":5}],"c-1":["\n","^    ",{"->t->":"incident_neglect_check_recent_release"},"end","\n",{"#f":5}]}],{"#f":1}],"check_endpoints":[["^<b>Is the high error rate across all endpoints or specific ones?</b>","\n","^hint: use <a target=\"_blank\" href=\"https://onenr.io/0yw4PkO4Vw3\" style=\"color: blue;text-decoration: underline;\">NR Query</a>","\n","ev","str","^Across all endpoints. Great, the mystery deepens","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["^ ",{"->":"check_fwf_flag_question"},"\n",{"#f":5}]}],{"#f":1}],"check_fwf_flag_question":[["^<b>Is there an FWF flag just toggled today?</b>","\n","ev","str","^Q: How to check if there is FWF change correlated?","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["^ ",{"->":"check_fwf_flag_answer"},"\n",{"#f":5}]}],{"#f":1}],"check_fwf_flag_answer":[["^<b> FWF  <a target=\"_blank\" href=\"https://deliveryhero.enterprise.slack.com/archives/C069FSDT9D3\" style=\"color: blue;text-decoration: underline;\" >Slack Channel</a> for all fwf updates</b>","\n","ev","str","^Nope, not related. It's affecting all countries and all endpoints. Move along.","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^Investigate further. This won't solve itself.","/str","/ev",{"*":".^.c-1","flg":4},{"c-0":["^ ",{"->":"check_clusters"},"\n",{"#f":5}],"c-1":["^ ",{"->":"check_clusters"},"\n",{"#f":5}]}],{"#f":1}],"check_clusters":[["^<b>Is the error rate increased across all clusters?</b>","\n","ev","str","^Q: How to check errors from all clusters or specific cluster?","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["^ ",{"->":"check_clusters_answer"},"\n",{"#f":5}]}],{"#f":1}],"check_clusters_answer":[["^<b>We can use <a target=\"_blank\" href=\"https://onenr.io/0Zw0qgxGERv\" style=\"color: blue;text-decoration: underline;\">NR Query</a> to correlate errors to specific cluster</b>","\n","ev","str","^Nope, just the main EKS cluster.","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["^ ",{"->":"check_pod_impact"},"\n",{"#f":5}]}],{"#f":1}],"check_pod_impact":[["^<b>Is the error rate only for a specific pod/host?</b>","\n","ev","str","^Q: How to check errors from specific pod/host?","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["^ ",{"->":"check_pod_impact_answer"},"\n",{"#f":5}]}],{"#f":1}],"check_pod_impact_answer":[["^<b>We can use <a target=\"_blank\" href=\"https://onenr.io/0OQMMPbB9QG\" style=\"color: blue;text-decoration: underline;\">NR Query</a> to correlate errors to specific pod</b>","\n","ev","str","^Yes, one pod is throwing error. (Typical for windows pods ;) )","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["^ ",{"->":"update_monitoring_state"},"\n",{"#f":5}]}],{"#f":1}],"update_monitoring_state":[["^<b>Update the incident to monitoring state?</b>","\n","ev","str","^Yes, let's keep everyone in the loop.","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^No, I’m busy. Let them guess what's happening.","/str","/ev",{"*":".^.c-1","flg":20},{"c-0":["^ ",{"->":"restart_pods_question"},"\n",{"#f":5}],"c-1":["\n","^    ",{"->t->":"incident_neglect_update_monitoring_state"},"end","\n",{"#f":5}]}],{"#f":1}],"restart_pods_question":[["^<b>Restart all pods?</b>","\n","ev","str","^Q: Should we restart all pods in case one pod causing the issue?","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["^ ",{"->":"restart_pods_answer"},"\n",{"#f":5}]}],{"#f":1}],"restart_pods_answer":[["ev","str","^No, that's overkill. Let’s just deal with the troublemaker.","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["^ ",{"->":"kill_pod"},"\n",{"#f":5}]}],{"#f":1}],"kill_pod":[["^<b>Kill the problematic pod?</b>","\n","ev","str","^Yes. A new pod will be recreated","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["^ ",{"->":"monitor_error_rate"},"\n",{"#f":5}]}],{"#f":1}],"monitor_error_rate":[["^<b>Monitor the error rate after restarting the pod?</b>","\n","ev","str","^Yes, and it’s reducing! Crisis mitigated!","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^No, I’m confident it’s fixed. What could possibly go wrong?","/str","/ev",{"*":".^.c-1","flg":20},{"c-0":["^ ",{"->":"resolve_incident"},"\n",{"#f":5}],"c-1":["\n","^    ",{"->t->":"incident_neglect_monitor_error_rate"},"end","\n",{"#f":5}]}],{"#f":1}],"resolve_incident":[["^<b>Update the incident to resolved state?</b>","\n","ev","str","^Yes, declare victory and bask in the glory.","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^No, I'm busy. Someone else can do it.","/str","/ev",{"*":".^.c-1","flg":20},{"c-0":["^ ",{"->":"post_mortem"},"\n",{"#f":5}],"c-1":["\n","^    ",{"->t->":"incident_neglect_resolve_incident"},"end","\n",{"#f":5}]}],{"#f":1}],"post_mortem":[["^<b>Create a draft post-mortem with timelines and findings?</b>","\n","ev","str","^Yes, document everything like the hero you are.","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^No, please not me.","/str","/ev",{"*":".^.c-1","flg":20},{"c-0":["^ ",{"->":"pair_with_team"},"\n",{"#f":5}],"c-1":["\n","^    ",{"->t->":"incident_neglect_post_mortem"},"end","\n",{"#f":5}]}],{"#f":1}],"pair_with_team":[["^<b>Pair with the team to deep dive further?</b>","\n","ev","str","^Yes, let’s analyze k8s events and logs from Grafana like detectives.","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["^ ",{"->":"conclusion"},"\n",{"#f":5}]}],{"#f":1}],"conclusion":["^<b> 🎉 **Congratulations!** The Error has been resolved, and you've learned valuable lessons along the way. The team appreciates your efforts. Now go treat yourself to some well-deserved coffee (or tea)!</b>","\n","end",{"#f":1}],"incident_neglect_start":[["^<b> 🚨 **Oh no!** Your inaction made things worse. The team had to jump in, stakeholders are frustrated, and you’ve earned the *“Least Responsive On-Call”* award for today.</b>","\n","ev","str","^Try again?","/str","/ev",{"*":".^.c-0","flg":20},{"c-0":["^ ",{"->":"start"},"\n",{"#f":5}]}],{"#f":1}],"incident_neglect_check_customer_impact":[["^<b> 🚨 **Oh no!** Your inaction made things worse. The team had to jump in, stakeholders are frustrated, and you’ve earned the *“Least Responsive On-Call”* award for today.</b>","\n","ev","str","^Try again?","/str","/ev",{"*":".^.c-0","flg":20},{"c-0":["^ ",{"->":"check_customer_impact"},"\n",{"#f":5}]}],{"#f":1}],"incident_neglect_create_incident":[["^<b> 🚨 **Oh no!** Your inaction made things worse. The team had to jump in, stakeholders are frustrated, and you’ve earned the *“Least Responsive On-Call”* award for today.</b>","\n","ev","str","^Try again?","/str","/ev",{"*":".^.c-0","flg":20},{"c-0":["^ ",{"->":"create_incident"},"\n",{"#f":5}]}],{"#f":1}],"incident_neglect_check_recent_release":[["^<b> 🚨 **Oh no!** Your inaction made things worse. The team had to jump in, stakeholders are frustrated, and you’ve earned the *“Least Responsive On-Call”* award for today.</b>","\n","ev","str","^Try again?","/str","/ev",{"*":".^.c-0","flg":20},{"c-0":["^ ",{"->":"check_recent_release_question"},"\n",{"#f":5}]}],{"#f":1}],"incident_neglect_update_monitoring_state":[["^<b> 🚨 **Oh no!** Your inaction made things worse. The team had to jump in, stakeholders are frustrated, and you’ve earned the *“Least Responsive On-Call”* award for today.</b>","\n","ev","str","^Try again?","/str","/ev",{"*":".^.c-0","flg":20},{"c-0":["^ ",{"->":"update_monitoring_state"},"\n",{"#f":5}]}],{"#f":1}],"incident_neglect_monitor_error_rate":[["^<b> 🚨 **Oh no!** Your inaction made things worse. The team had to jump in, stakeholders are frustrated, and you’ve earned the *“Least Responsive On-Call”* award for today.</b>","\n","ev","str","^Try again?","/str","/ev",{"*":".^.c-0","flg":20},{"c-0":["^ ",{"->":"monitor_error_rate"},"\n",{"#f":5}]}],{"#f":1}],"incident_neglect_resolve_incident":[["^<b> 🚨 **Oh no!** Your inaction made things worse. The team had to jump in, stakeholders are frustrated, and you’ve earned the *“Least Responsive On-Call”* award for today.</b>","\n","ev","str","^Try again?","/str","/ev",{"*":".^.c-0","flg":20},{"c-0":["^ ",{"->":"resolve_incident"},"\n",{"#f":5}]}],{"#f":1}],"incident_neglect_post_mortem":[["^<b> 🚨 **Oh no!** Your inaction made things worse. The team had to jump in, stakeholders are frustrated, and you’ve earned the *“Least Responsive On-Call”* award for today.</b>","\n","ev","str","^Try again?","/str","/ev",{"*":".^.c-0","flg":20},{"c-0":["^ ",{"->":"post_mortem"},"\n",{"#f":5}]}],{"#f":1}],"#f":1}],"listDefs":{}}